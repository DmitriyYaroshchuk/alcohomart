!function(){"use strict";function e(){const e=localStorage.getItem("basket");return e?JSON.parse(e):[]}function t(e){document.querySelectorAll(".basket__counter").forEach((t=>{localStorage.setItem("basket",JSON.stringify(e)),t.textContent=e.length}))}var o=function(e,t,o){document.querySelectorAll(t).forEach((t=>{const c=t.closest(o),n=c.dataset.productId,r=c.querySelector(".card__link-basket"),s=e.includes(n);t.disabled=s,t.classList.toggle("active",s),t.textContent=s?"В кошику":"Замовити",r&&t.classList.contains("active")&&r.classList.add("active")}))},c=function(){let c=[];document.querySelector(".product-info__details").addEventListener("click",(c=>{console.log("click"),function(c,n,r){const s=c.target.closest(n);if(!s)return;const l=s.closest(r).dataset.productId,d=e();d.includes(l)||(d.push(l),t(d),o(d,n,r))}(c,".chars__btn--add",".product-info")})),async function(){try{if(0===c.length){let e=await fetch("./../data/all.json");if(!e.ok)throw new Error(e.statusText);c=await e.json(),console.log(c)}!function(e){if(!e||0===e.length)return;const t=Number(("id",new URLSearchParams(window.location.search).get("id")));if(console.log(t),!t)return;const o=e.find((e=>e.id===t));o&&function(e){const{id:t,img:o,title:c,price:n,producer:r,strengthen:s,country:l,endurance:d,volume:i,description:a}=e;document.querySelector(".product-info").dataset.productId=t,document.querySelector(".product-info__details img").src=`./../img/${o}`,document.querySelector(".chars__val--name").textContent=c,document.querySelector(".chars__price").textContent=`Ціна: ${n}грн.`,document.querySelector(".chars__val--producer").textContent=r,document.querySelector(".chars__val--strength").textContent=s,document.querySelector(".chars__val--country").textContent=l,document.querySelector(".chars__val--endurance").textContent=d,document.querySelector(".chars__val--volume").textContent=i,document.querySelector(".product-info__desc p").textContent=a}(o)}(c),function(o){const c=e();c.forEach(((e,t)=>{o.some((t=>t.id===Number(e)))||(console.log("before: ",c),c.slice(0,t),console.log("after: ",c))})),t(c)}(c);const n=e();o(n,".chars__btn--add",".product-info")}catch(e){console.error(e)}}()};document.addEventListener("DOMContentLoaded",(()=>{var e;(function(){const e=document.querySelector(".header"),t=document.querySelector(".hero").offsetHeight;window.addEventListener("scroll",(()=>{window.scrollY>=.25*t?e.classList.add("fixxed"):e.classList.remove("fixxed")}))})(),function(e,t,o){const c=document.querySelector(".mobile-nav-btn"),n=document.querySelector(".mobile-nav"),r=document.querySelector(".nav-icon");c.addEventListener("click",(()=>{if(n.classList.toggle("active")){let e=window.innerWidth-document.body.offsetWidth+"px";n.style.paddingRight=e,document.body.style.paddingRight=e}else n.style.paddingRight="0px",document.body.style.paddingRight="0px";r.classList.toggle("nav-icon--active"),document.body.classList.toggle("no-scroll")}))}(),c(),e=".mobile-nav",document.querySelectorAll('a[href^="#"]').forEach((t=>{t.addEventListener("click",(()=>{const t=document.querySelector(e);t&&(t.classList.remove("active"),document.querySelector("body").classList.remove("no-scroll"),document.querySelector(".nav-icon").classList.remove("nav-icon--active"))}))}))}))}();